---
title: MySQL日志
date: 2022-10-10 09:37:23
categories: 
 - MySQL
tags: 
 - 日志
---

- **undo log（回滚日志）**：是Innodb存储引擎层生成的日志，实现了事务的**原子性**，主要**用于事务回滚和MVCC**。

- **redo log（重做日志）**：是Innodb存储引擎层生成的日志，实现了事务中的**持久性**，主要**用于掉电等故障恢复**。

- **binlog（归档日志）**：是Server层生成的日志，主要**用于数据备份和主从复制**。

  ![](https://testingcf.jsdelivr.net/gh/znej/pic/picgo/20221010095847.png)

<!--more-->

![](https://testingcf.jsdelivr.net/gh/znej/pic/picgo/20221010095003.png)

**执行一条update语句，期间发生了什么？**

- 客户端先通过连接器建立连接，连接器自会判断用户身份；
- 因为这是一条update语句，所以不需要经过查询缓存，但是表上有更新语句，是会把整个表的查询缓存清空的，所以说查询缓存很鸡肋，在MySQL8.0就被移除这个功能了；
- 解析器会通过词法分析识别出关键字update，表名等等，构建出语法树，接着还会做语法分析，判断输入的语句是否符合MySQL语法；
- 预处理器会判断表和字段是否存在；
- 优化器确定执行计划，因为where条件中的id是主键索引，索引决定要使用id这个索引；
- 执行器负责具体执行，找到这一行，然后更新。

