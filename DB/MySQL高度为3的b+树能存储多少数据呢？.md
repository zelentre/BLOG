---
title: MySQL高度为3的b+树能存储多少数据呢？
date: 2022-08-04 19:35:13
categories: 
 - DB
 - MySQL
tags: 
 - MySQL
---

# MySQL高度为3的b+树能存储多少数据呢？

**InnoDB的页的概念**

​	MySQL的设计者为了避免每条数据都从磁盘中进行读取，所以设计了一个页结构，用于磁盘与内存之间的交互单元。存放表中数据记录的页，称为索引页或者数据页。数据页就是实际数据（一般是叶子节点）。索引页由索引键值和索引指针组成（一般为非叶子节点）。

​	一个页通常是16KB的大小。磁盘存储数据的最小单元是扇区，一个扇区是512字节。因此InnoDB的所有数据文件（后缀为.ibd的文件），它的大小始终都是16384B（16K）的整数倍。

​	MySQL采取的b+树的结构，b+数上的每个节点都是一个页。叶子节点存放了**整张表的所有行数据**，非叶子节点存储的是索引值以及页偏移量。

<!--more-->

**假设高度为2**

由于b+树的结构，那么我们认为高度为2的时候，我们存在一个根节点和若干个叶子节点。那么我们就得到了第一个公式，高度为2的时候，等于我们根节点指针数*单个叶子节点记录行数。就是我们能存储的数据量。假设我们有一个表，主键的id是bigint,bigint长度为8字节。指针的大小在mysql中是6字节。那么8+6等于14字节。一个索引页用16×1024=16384。16384/14~=1170。那么我们一个索引页就有1170个索引。那么再假设我们的一行数据是1kb，那么一个页就是16行数据。我们用刚才的1170乘以16,那么就是18720记录。

**高度为3**

那么同理高度为3的时候，我们b+树的构成是根节点+一堆非叶子节点+
一堆叶子节点。非叶子节点和根节点都是我们的索引页。和之前讲的同
理一个页就是1170数据。那么我们做一个乘法1170×1170×16 = 21902400 条数据。千万级的数据。
那么我们可以得到一个结论，千万级的数据，我们进行1~3次io就可以查
找到我们要的数据啦!